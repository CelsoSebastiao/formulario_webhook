<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captura de Leads - AutoVendas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%); }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-6">
    <div class="max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden">
        <div class="gradient-bg p-8 text-white text-center">
            <h2 class="text-3xl font-extrabold tracking-tight">Fale Conosco</h2>
            <p class="text-orange-100 opacity-90 mt-2">Nossa IA entrará em contato em breve.</p>
        </div>
        
        <form id="leadForm" class="p-8 space-y-5">
            <input type="text" name="name" required placeholder="Seu Nome" class="w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl outline-none">
            <input type="email" name="email" required placeholder="E-mail" class="w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl outline-none">
            <input type="tel" name="phone" placeholder="WhatsApp" class="w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl outline-none">
            <textarea name="message" rows="3" placeholder="Sua Mensagem" class="w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl outline-none"></textarea>

            <button type="submit" id="submitBtn" class="w-full gradient-bg text-white font-bold py-5 rounded-2xl shadow-lg">
                ENVIAR AGORA
            </button>
        </form>

        <div id="successMsg" class="hidden p-12 text-center">
            <h3 class="text-2xl font-bold text-slate-800 text-green-600">✅ Enviado!</h3>
            <p class="text-slate-500 mt-2">Verifique o Atendimento no CRM.</p>
        </div>
    </div>

    <script>
        const WEBHOOK_URL = 'http://localhost:8080/api/webhook/leads/c6d2281b86ee1268084128f0d8ac299f'; 

        document.getElementById('leadForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = 'ENVIANDO...';

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    e.target.classList.add('hidden');
                    document.getElementById('successMsg').classList.remove('hidden');
                } else {
                    alert('Erro no Servidor. Verifique se o PHP Artisan Serve está rodando.');
                    resetBtn(btn);
                }
            } catch (error) {
                console.error(error);
                alert('Erro de Conexão! O Navegador bloqueou o GitHub (HTTPS) de falar com o Localhost (HTTP).');
                resetBtn(btn);
            }
        });

        function resetBtn(btn) {
            btn.disabled = false;
            btn.innerText = 'ENVIAR AGORA';
        }
    </script>
</body>
</html>
